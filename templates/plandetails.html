<!doctype html>
<html lang="en">

<head>
    <!-- Meta Tag -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Plan details</title>
    <link rel="shortcut icon" href="static/images/favicon.ico">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Sen:wght@400;700&display=swap" rel="stylesheet">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Barlow:ital,wght@0,300;0,400;0,500;0,700;1,400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/bootstrap.min.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/bootstrap-select.min.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/all.min.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/animate.min.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='webfonts/flaticon/flaticon.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/owl.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/jquery.fancybox.min.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/layerslider.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/template.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/colors/color-4.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/loader.css') }}">

</head>

<body>

   

    <div id="page_wrapper" class="bg-light">
        <!--============== Header Section Start ==============-->
        <header class="header-style nav-on-top bg-white">
            <div class="main-nav">
                <div class="container">
                    <div class="row">
                        <div class="col">
                            <nav class="navbar navbar-expand-lg nav-secondary nav-primary-hover nav-line-active">
                                <a class="navbar-brand" href="/"><img class="nav-logo" src="./static/logo.png" alt></a>
                                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                                    <span class="navbar-toggler-icon flaticon-menu flat-small text-primary"></span>
                                  </button>
                                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                                    <ul class="navbar-nav ms-auto">
                                        <li class="nav-item">
                                            <a class="nav-link" style="font-size: large;" href="/">Home</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" style="font-size: large;" href="/groupchat">Create/ Join GC</a>
                                        </li>
                                        
                                        <li class="nav-item">
                                            <a class="nav-link" style="font-size: large;" href="/login">login</a>
                                        </li>     
                                                                       
                                        <li class="nav-item"> 
                                            <a class="nav-link" style="font-size: large;" href="/dashboard">Dashboard</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" style="font-size: large;" href="/logout">logout</a>
                                        </li> 
                                    </ul>
                                </div>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>
        </header>
        <input type="hidden"  id="mapresults" value="{{ mapresults }}">

        <div class="row">
            <div class="col-md-6 ps-0">
                <div id="map-banner">
                    <div class="homepage-map">
                        <div id="map" style="height: calc(100vh - 94px);"></div>
                    </div>
                </div>
            </div>
            
            <div class="col-md-6">
                <div class="overflow-auto map-view-grid px-0 pb-4" style="height: calc(100vh - 94px);">
                    <div class="col-xl-8 order-xl-1" style="font-size: large;">
                        <div class="property-overview border summary rounded bg-white p-30 mb-30" style="width: 700px;">
                            <div class="row mb-4">
                                <div class="col-auto">
                                    
                                    
                                        <h4 class="listing-title">Scedule</h4>
                                      
                                      
                                

                                <div class="col-12">
                                    

                                    <hr>
                                    <div class="mt-2">
                                        <ul class="list-three-fold-width d-table">
                                            
                                            <ul>
                                                <li>{{ event.name}}</li>
                                                <li>Breakfast: {{ event.time[0].breakfast}}</li>
                                                <li>Activity 1: {{ event.time[0].activity}}</li>
                                                <li>Lunch: {{ event.time[0].lunch}}</li>
                                                <li>Activity 2: {{ event.time[0].activity2}}</li>
                                                <li>Dinner: {{ event.time[0].dinner}}</li>
                                            </ul>
                                        
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <h2 style="display: none" id="latitude">{{ event.latitude }}</h2>
                        <h2 style="display: none" id="longitude">{{ event.longitude }}</h2>
                    
                </div>
            </div>

        


        
    
    </div>
    <script>
        
            var mapStyles = [
        {
            "featureType": "administrative",
            "elementType": "labels.text.fill",
            "stylers": [
                {
                    "color": "#444444"
                }
            ]
        },
        {
            "featureType": "landscape",
            "elementType": "all",
            "stylers": [
                {
                    "color": "#f2f2f2"
                }
            ]
        },
        {
            "featureType": "poi",
            "elementType": "all",
            "stylers": [
                {
                    "visibility": "off"
                }
            ]
        },
        {
            "featureType": "road",
            "elementType": "all",
            "stylers": [
                {
                    "saturation": -100
                },
                {
                    "lightness": 45
                }
            ]
        },
        {
            "featureType": "road.highway",
            "elementType": "all",
            "stylers": [
                {
                    "visibility": "simplified"
                }
            ]
        },
        {
            "featureType": "road.arterial",
            "elementType": "labels.icon",
            "stylers": [
                {
                    "visibility": "off"
                }
            ]
        },
        {
            "featureType": "transit",
            "elementType": "all",
            "stylers": [
                {
                    "visibility": "off"
                }
            ]
        },
        {
            "featureType": "water",
            "elementType": "all",
            "stylers": [
                {
                    "color": "#46bcec"
                },
                {
                    "visibility": "on"
                }
            ]
        }
    ];
    

    
    latitudes = document.getElementById("latitude");
    longitudes = document.getElementById("longitude");
    var latitude = latitudes.innerHTML;
    var longitude = latitudes.innerHTML;

    
    function createHomepageGoogleMap(_latitude, _longitude) {
        if (document.getElementById('map') != null) {
            var map = new google.maps.Map(document.getElementById('map'), {
                zoom: 10,
                scrollwheel: false,
                center: new google.maps.LatLng(_latitude, _longitude),
                mapTypeId: google.maps.MapTypeId.ROADMAP,
                styles: mapStyles
            });
    
            var newMarkers = [];
    
            for (var i = 0; i < locations.length; i++) {
                console.log(i);
    
                var pictureLabel = document.createElement("img");
                pictureLabel.src = "static/images/map/Detached.png";
    
                var boxText = document.createElement("div");
                infoboxOptions = {
                    content: boxText,
                    disableAutoPan: false,
                    pixelOffset: new google.maps.Size(-100, 0),
                    zIndex: null,
                    alignBottom: true,
                    boxClass: "infobox-wrapper",
                    enableEventPropagation: true,
                    closeBoxMargin: "0px 0px -8px 0px",
                    closeBoxURL: "static/images/map/close.png",
                    infoBoxClearance: new google.maps.Size(1, 1)
                };
    
                var marker = new MarkerWithLabel({
                    title: "Location",
                    position: new google.maps.LatLng(latitude, longitude),
                    map: map,
                    icon: 'static/images/map/marker.png',
                    labelContent: pictureLabel,
                    labelAnchor: new google.maps.Point(50, 0),
                    labelClass: "marker-style"
                });
    
                newMarkers.push(marker);

    
                newMarkers[i].infobox = new InfoBox(infoboxOptions);
    
                google.maps.event.addListener(marker, 'click', (function (marker, i) {
                    return function () {
                        for (let h = 0; h < newMarkers.length; h++) {
                            newMarkers[h].infobox.close();
                        }
                        newMarkers[i].infobox.open(map, this);
                    };
                })(marker, i));
            }
    
            var clusterStyles = [
                {
                    url: 'static/images/map/marker.png',
                    height: 60,
                    width: 60
                }
            ];
    
            var markerCluster = new MarkerClusterer(map, newMarkers, { styles: clusterStyles, maxZoom: 15 });
    
            $('body').addClass('loaded');
            setTimeout(function () {
                $('body').removeClass('has-fullscreen-map');
            }, 1000);
    
            $('#map').removeClass('fade-map');
    
            //  Dynamically show/hide markers --------------------------------------------------------------
    
            // Function which set marker to the user position
            function success(position) {
                var center = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
                map.panTo(center);
                $('#map').removeClass('fade-map');
            }
    
            // Enable Geo Location on button click
            $('.geo-location').on("click", function () {
                if (navigator.geolocation) {
                    $('#map').addClass('fade-map');
                    navigator.geolocation.getCurrentPosition(success);
                } else {
                    error('Geo Location is not supported');
                }
            });
        }
    }
    
        </script>
   {{ url_for('static', filename='css/bootstrap.min.css') }}
    <!-- Javascript Files -->
    <script src="{{ url_for('static', filename='js/jquery.min.js') }}"></script>
   <script src="https://kit.fontawesome.com/dae3a3f92f.js" crossorigin="anonymous"></script>
   <script src="{{ url_for('static', filename='js/popper.min.js') }}"></script>
   <script src="{{ url_for('static', filename='js/bootstrap.min.js') }}"></script>
   <script src="{{ url_for('static', filename='js/bootstrap-select.min.js') }}"></script>
   <script src="{{ url_for('static', filename='js/jquery.fancybox.min.js') }}"></script>
   <script src="{{ url_for('static', filename='js/owl.js') }}"></script>
   <script src="{{ url_for('static', filename='js/range/tmpl.js') }}"></script>
   <script src="{{ url_for('static', filename='js/range/jquery.dependClass.js') }}"></script>
   <script src="{{ url_for('static', filename='js/range/draggable.js') }}"></script>
   <script src="{{ url_for('static', filename='js/range/jquery.slider.js') }}"></script>
   <script src="{{ url_for('static', filename='js/wow.js') }}"></script>
   <script src="{{ url_for('static', filename='js/mixitup.min.js') }}"></script>
   <script src="{{ url_for('static', filename='js/paraxify.js') }}"></script>
   <script src="{{ url_for('static', filename='js/custom.js') }}"></script>
   
   <!-- Google Maps Script remains the same -->
   <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA7-psaSTK-XpJG6am5XfyTHADS-5ENEMw"></script>
   
   <script src="{{ url_for('static', filename='js/map/markerwithlabel_packed.js') }}"></script>
   <script src="{{ url_for('static', filename='js/map/infobox.js') }}"></script>
   <script src="{{ url_for('static', filename='js/map/markerclusterer_packed.js') }}"></script>
   


    
    <script>
        (function($) {


            var _latitude = 45.481227499999996;
            var _longitude = -73.611569;
            if (event != "nothing") {
                createHomepageGoogleMap(_latitude, _longitude);
            }

        })(jQuery);
    </script>
</body>

</html>